{"ast":null,"code":"import { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useAuthStore } from '../store/auth/authStore';\nimport { useGetMeQuery } from '../rq/hooks/useGetMeQuery';\nexport const useLogin = (token, role) => {\n  const {\n    push\n  } = useHistory();\n  const {\n    setUser,\n    setIsAuthenticated\n  } = useAuthStore();\n  const {\n    refetch\n  } = useGetMeQuery({\n    enabled: false,\n    onSuccess: data => {\n      setUser(data);\n      setIsAuthenticated(true);\n      localStorage.setItem('auth.token', token);\n      push(role === 'admin' ? '/admin' : 'user');\n    }\n  });\n  const login = useCallback(() => refetch(), [refetch]);\n  const logout = useCallback(() => {\n    console.log('got here');\n    setUser(null);\n    setIsAuthenticated(false);\n    localStorage.removeItem('auth.token');\n    push('/');\n  }, [push, setIsAuthenticated, setUser]);\n  return {\n    login,\n    logout\n  };\n};","map":{"version":3,"names":["useCallback","useHistory","useAuthStore","useGetMeQuery","useLogin","token","role","push","setUser","setIsAuthenticated","refetch","enabled","onSuccess","data","localStorage","setItem","login","logout","console","log","removeItem"],"sources":["/Users/erakastrati/Desktop/HMS-frontend/src/hooks/useAuth.js"],"sourcesContent":["import { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useAuthStore } from '../store/auth/authStore';\nimport { useGetMeQuery } from '../rq/hooks/useGetMeQuery';\n\nexport const useLogin = (token, role) => {\n  const { push } = useHistory();\n  const { setUser, setIsAuthenticated } = useAuthStore();\n\n  const { refetch } = useGetMeQuery({\n    enabled: false,\n    onSuccess: (data) => {\n      setUser(data);\n      setIsAuthenticated(true);\n      localStorage.setItem('auth.token', token);\n      push(role === 'admin' ? '/admin' : 'user');\n    },\n  });\n  const login = useCallback(() => refetch(), [refetch]);\n\n  const logout = useCallback(() => {\n    console.log('got here');\n    setUser(null);\n    setIsAuthenticated(false);\n    localStorage.removeItem('auth.token');\n    push('/');\n  }, [push, setIsAuthenticated, setUser]);\n\n  return { login, logout };\n};\n"],"mappings":"AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,YAAT,QAA6B,yBAA7B;AACA,SAASC,aAAT,QAA8B,2BAA9B;AAEA,OAAO,MAAMC,QAAQ,GAAG,CAACC,KAAD,EAAQC,IAAR,KAAiB;EACvC,MAAM;IAAEC;EAAF,IAAWN,UAAU,EAA3B;EACA,MAAM;IAAEO,OAAF;IAAWC;EAAX,IAAkCP,YAAY,EAApD;EAEA,MAAM;IAAEQ;EAAF,IAAcP,aAAa,CAAC;IAChCQ,OAAO,EAAE,KADuB;IAEhCC,SAAS,EAAGC,IAAD,IAAU;MACnBL,OAAO,CAACK,IAAD,CAAP;MACAJ,kBAAkB,CAAC,IAAD,CAAlB;MACAK,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCV,KAAnC;MACAE,IAAI,CAACD,IAAI,KAAK,OAAT,GAAmB,QAAnB,GAA8B,MAA/B,CAAJ;IACD;EAP+B,CAAD,CAAjC;EASA,MAAMU,KAAK,GAAGhB,WAAW,CAAC,MAAMU,OAAO,EAAd,EAAkB,CAACA,OAAD,CAAlB,CAAzB;EAEA,MAAMO,MAAM,GAAGjB,WAAW,CAAC,MAAM;IAC/BkB,OAAO,CAACC,GAAR,CAAY,UAAZ;IACAX,OAAO,CAAC,IAAD,CAAP;IACAC,kBAAkB,CAAC,KAAD,CAAlB;IACAK,YAAY,CAACM,UAAb,CAAwB,YAAxB;IACAb,IAAI,CAAC,GAAD,CAAJ;EACD,CANyB,EAMvB,CAACA,IAAD,EAAOE,kBAAP,EAA2BD,OAA3B,CANuB,CAA1B;EAQA,OAAO;IAAEQ,KAAF;IAASC;EAAT,CAAP;AACD,CAxBM"},"metadata":{},"sourceType":"module"}