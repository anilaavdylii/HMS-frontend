{"ast":null,"code":"import * as React from \"react\";\nimport { isBrowser } from \"@chakra-ui/utils\";\nimport { useLatestRef } from \"./use-latest-ref\";\n/**\n * React hook to manage browser event listeners\n *\n * @param event the event name\n * @param handler the event handler function to execute\n * @param doc the dom environment to execute against (defaults to `document`)\n * @param options the event listener options\n */\n\nexport function useEventListener(event, handler, doc, options) {\n  if (doc === void 0) {\n    doc = isBrowser ? document : null;\n  }\n\n  var savedHandler = useLatestRef(handler);\n  React.useEffect(() => {\n    if (!doc) return undefined;\n\n    var listener = event => {\n      savedHandler.current == null ? void 0 : savedHandler.current(event);\n    };\n\n    doc.addEventListener(event, listener, options);\n    return () => {\n      doc.removeEventListener(event, listener, options);\n    };\n  }, [event, doc, options, savedHandler]);\n  return () => {\n    if (savedHandler.current) {\n      var _doc;\n\n      (_doc = doc) == null ? void 0 : _doc.removeEventListener(event, savedHandler.current, options);\n    }\n  };\n}","map":{"version":3,"sources":["../../src/use-event-listener.ts"],"names":["doc","isBrowser","savedHandler","useLatestRef","React","listener","event"],"mappings":"AAAA,OAAO,KAAP,KAAA,MAAA,OAAA;AACA,SAAA,SAAA,QAAA,kBAAA;AACA,SAAA,YAAA,QAAA,kBAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAAA,gBAAA,CAAA,KAAA,EAAA,OAAA,EAAA,GAAA,EAAA,OAAA,EAKL;EAAA,IAFAA,GAEA,KAAA,KAAA,CAAA,EAAA;IAFAA,GAEA,GAFqCC,SAAS,GAAA,QAAA,GAAc,IAA5DD;EAEA;;EACA,IAAME,YAAY,GAAGC,YAAY,CAAjC,OAAiC,CAAjC;EAEAC,KAAK,CAALA,SAAAA,CAAgB,MAAM;IACpB,IAAI,CAAJ,GAAA,EAAU,OAAA,SAAA;;IAEV,IAAMC,QAAQ,GAAIC,KAAD,IAAgB;MAC/BJ,YAAY,CAAZA,OAAAA,IAAAA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,YAAY,CAAZA,OAAAA,CAAAA,KAAAA,CAAAA;IADF,CAAA;;IAIAF,GAAG,CAAHA,gBAAAA,CAAAA,KAAAA,EAAAA,QAAAA,EAAAA,OAAAA;IAEA,OAAO,MAAM;MACXA,GAAG,CAAHA,mBAAAA,CAAAA,KAAAA,EAAAA,QAAAA,EAAAA,OAAAA;IADF,CAAA;EATFI,CAAAA,EAYG,CAAA,KAAA,EAAA,GAAA,EAAA,OAAA,EAZHA,YAYG,CAZHA;EAcA,OAAO,MAAM;IACX,IAAIF,YAAY,CAAhB,OAAA,EAA0B;MAAA,IAAA,IAAA;;MACxB,CAAA,IAAA,GAAA,GAAA,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,IAAA,CAAA,mBAAA,CAAA,KAAA,EAAgCA,YAAY,CAA5C,OAAA,EAAA,OAAA,CAAA;IACD;EAHH,CAAA;AAKD","sourcesContent":["import * as React from \"react\"\nimport { isBrowser } from \"@chakra-ui/utils\"\nimport { useLatestRef } from \"./use-latest-ref\"\n\n/**\n * React hook to manage browser event listeners\n *\n * @param event the event name\n * @param handler the event handler function to execute\n * @param doc the dom environment to execute against (defaults to `document`)\n * @param options the event listener options\n */\nexport function useEventListener<K extends keyof DocumentEventMap>(\n  event: K,\n  handler: (event: DocumentEventMap[K]) => void,\n  doc: Document | HTMLElement | null = isBrowser ? document : null,\n  options?: boolean | AddEventListenerOptions,\n) {\n  const savedHandler = useLatestRef(handler)\n\n  React.useEffect(() => {\n    if (!doc) return undefined\n\n    const listener = (event: any) => {\n      savedHandler.current?.(event)\n    }\n\n    doc.addEventListener(event, listener, options)\n\n    return () => {\n      doc.removeEventListener(event, listener, options)\n    }\n  }, [event, doc, options, savedHandler])\n\n  return () => {\n    if (savedHandler.current) {\n      doc?.removeEventListener(event, savedHandler.current as any, options)\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}