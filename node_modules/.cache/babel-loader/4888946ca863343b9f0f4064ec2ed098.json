{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport { useDescendants, useDescendant } from \"@chakra-ui/descendant\";\nimport { useControllableState, useId } from \"@chakra-ui/hooks\";\nimport { mergeRefs, callAllHandlers, createContext, ariaAttr } from \"@chakra-ui/utils\";\nimport { useState, useEffect, useRef, useCallback } from \"react\";\nvar [PinInputProvider, usePinInputContext] = createContext({\n  name: \"PinInputContext\",\n  errorMessage: \"usePinInputContext: `context` is undefined. Seems you forgot to all pin input fields within `<PinInput />`\"\n});\nexport { PinInputProvider, usePinInputContext };\n\nfunction toArray(value) {\n  if (typeof value === \"string\") {\n    return value.split(\"\");\n  }\n\n  return undefined;\n}\n\nexport function usePinInput(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var {\n    autoFocus,\n    value,\n    defaultValue,\n    onChange: _onChange,\n    onComplete,\n    placeholder = \"○\",\n    manageFocus = true,\n    id: idProp,\n    isDisabled,\n    isInvalid\n  } = props;\n  var uuid = useId();\n  var id = idProp != null ? idProp : \"pin-input-\" + uuid;\n  var domContext = useDescendants();\n  var {\n    descendants\n  } = domContext;\n  var [moveFocus, setMoveFocus] = useState(true);\n  var [values, setValues] = useControllableState({\n    defaultValue: toArray(defaultValue) || [],\n    value: toArray(value),\n    onChange: values => _onChange == null ? void 0 : _onChange(values.join(\"\"))\n  });\n  useEffect(() => {\n    if (autoFocus) {\n      var _firstInput$element;\n\n      var firstInput = descendants[0];\n      firstInput == null ? void 0 : (_firstInput$element = firstInput.element) == null ? void 0 : _firstInput$element.focus();\n    }\n  }, [descendants, autoFocus]);\n  var focusNext = useCallback(index => {\n    var _nextInput$element;\n\n    if (!moveFocus || !manageFocus) return;\n    var nextInput = descendants[index + 1];\n    nextInput == null ? void 0 : (_nextInput$element = nextInput.element) == null ? void 0 : _nextInput$element.focus();\n  }, [descendants, moveFocus, manageFocus]);\n  var setValue = useCallback((value, index) => {\n    var nextValues = [...values];\n    nextValues[index] = value;\n    setValues(nextValues); // if we're at the last input, call onComplete (no need to move focus)\n\n    if (index === descendants.length - 1) {\n      onComplete == null ? void 0 : onComplete(nextValues.join(\"\"));\n    } else {\n      focusNext(index);\n    }\n  }, [values, setValues, focusNext, onComplete, descendants.length]);\n  var clear = useCallback(() => {\n    var _firstInput$element2;\n\n    var values = Array(descendants.length).fill(\"\");\n    setValues(values);\n    var firstInput = descendants[0];\n    (_firstInput$element2 = firstInput.element) == null ? void 0 : _firstInput$element2.focus();\n  }, [descendants, setValues]);\n  return {\n    id,\n    domContext,\n    setValue,\n    values,\n    setValues,\n    setMoveFocus,\n    clear,\n    onComplete,\n    placeholder,\n    manageFocus,\n    isDisabled,\n    isInvalid\n  };\n}\nexport function usePinInputField(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var {\n    ref: forwardedRef\n  } = props,\n      rest = _objectWithoutPropertiesLoose(props, [\"ref\"]);\n\n  var ref = useRef(null);\n  var {\n    id,\n    isDisabled,\n    isInvalid,\n    setValue,\n    values,\n    setMoveFocus,\n    setValues,\n    domContext,\n    placeholder,\n    manageFocus\n  } = usePinInputContext();\n  var {\n    descendants\n  } = domContext;\n  var index = useDescendant({\n    context: domContext,\n    element: ref.current\n  });\n  var getNextValue = useCallback((currentValue, eventValue) => {\n    var nextValue = eventValue;\n\n    if (currentValue && currentValue.length > 0) {\n      var [firstValue, secondValue] = eventValue;\n\n      if (currentValue[0] === firstValue) {\n        nextValue = secondValue;\n      } else if (currentValue[0] === secondValue) {\n        nextValue = firstValue;\n      }\n    }\n\n    return nextValue;\n  }, []); // Improved from: https://github.com/uber/baseweb/blob/master/src/pin-code/pin-code.js\n\n  var onChange = useCallback(event => {\n    var eventValue = event.target.value;\n    var currentValue = values[index];\n    var nextValue = getNextValue(currentValue, eventValue); // if the value was removed using backspace\n\n    if (nextValue === \"\") {\n      setValue(\"\", index);\n      return;\n    } // in the case of an autocomplete or copy and paste\n\n\n    if (eventValue.length > 2) {\n      // see if we can use the string to fill out our values\n      if (eventValue.match(/^[0-9]+$/)) {\n        var {\n          length\n        } = descendants; // ensure the value matches the number of inputs\n\n        var _nextValue = eventValue.split(\"\").filter((_, i) => i < length);\n\n        setValues(_nextValue);\n      }\n\n      return;\n    } // only set if the new value is a number\n\n\n    if (nextValue.match(/^[0-9]$/)) {\n      setValue(nextValue, index);\n    }\n\n    setMoveFocus(true);\n  }, [values, index, getNextValue, setMoveFocus, setValue, descendants.length, setValues]);\n  var onKeyDown = useCallback(event => {\n    if (event.key === \"Backspace\" && manageFocus) {\n      if (event.target.value === \"\") {\n        var prevInput = descendants[index - 1];\n\n        if (prevInput) {\n          var _prevInput$element;\n\n          setValue(\"\", index - 1);\n          (_prevInput$element = prevInput.element) == null ? void 0 : _prevInput$element.focus();\n          setMoveFocus(true);\n        }\n      } else {\n        setMoveFocus(false);\n      }\n    }\n  }, [descendants, index, setValue, setMoveFocus, manageFocus]);\n  var [hasFocus, setHasFocus] = useState(false);\n  var onFocus = useCallback(() => {\n    setHasFocus(true);\n  }, []);\n  var onBlur = useCallback(() => {\n    setHasFocus(false);\n  }, []);\n  return _extends({}, rest, {\n    id: id + \"-\" + index,\n    disabled: isDisabled,\n    \"aria-invalid\": ariaAttr(isInvalid),\n    ref: mergeRefs(ref, forwardedRef),\n    onChange: callAllHandlers(rest.onChange, onChange),\n    onKeyDown: callAllHandlers(rest.onKeyDown, onKeyDown),\n    onFocus: callAllHandlers(rest.onFocus, onFocus),\n    onBlur: callAllHandlers(rest.onBlur, onBlur),\n    value: values[index] || \"\",\n    inputMode: \"numeric\",\n    \"aria-label\": rest[\"aria-label\"] || \"Please enter your pin code\",\n    autoComplete: \"not-allowed\",\n    placeholder: hasFocus ? \"\" : placeholder\n  });\n}","map":{"version":3,"sources":["../../src/use-pin-input.ts"],"names":["createContext","name","errorMessage","value","props","onChange","placeholder","manageFocus","id","isInvalid","uuid","useId","idProp","domContext","useDescendants","descendants","useState","useControllableState","defaultValue","toArray","values","useEffect","firstInput","focusNext","useCallback","index","nextInput","setValue","nextValues","setValues","onComplete","clear","Array","ref","forwardedRef","rest","useRef","usePinInputContext","useDescendant","context","element","current","getNextValue","nextValue","currentValue","event","eventValue","length","i","setMoveFocus","onKeyDown","prevInput","onFocus","setHasFocus","onBlur","disabled","ariaAttr","mergeRefs","callAllHandlers","inputMode","autoComplete","hasFocus"],"mappings":"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","sourcesContent":["import { useDescendants, useDescendant } from \"@chakra-ui/descendant\"\nimport { useControllableState, useId } from \"@chakra-ui/hooks\"\nimport {\n  mergeRefs,\n  callAllHandlers,\n  createContext,\n  ariaAttr,\n} from \"@chakra-ui/utils\"\nimport {\n  useState,\n  useEffect,\n  useRef,\n  useCallback,\n  ChangeEvent,\n  ChangeEventHandler,\n  KeyboardEventHandler,\n  KeyboardEvent,\n  InputHTMLAttributes,\n  FocusEventHandler,\n  Ref,\n} from \"react\"\n\nexport type PinInputContext = UsePinInputReturn & {\n  /**\n   * Sets the pin input component to the disabled state\n   */\n  isDisabled?: boolean\n  /**\n   * Sets the pin input component to the invalid state\n   */\n  isInvalid?: boolean\n}\n\nconst [PinInputProvider, usePinInputContext] = createContext<PinInputContext>({\n  name: \"PinInputContext\",\n  errorMessage:\n    \"usePinInputContext: `context` is undefined. Seems you forgot to all pin input fields within `<PinInput />`\",\n})\n\nexport { PinInputProvider, usePinInputContext }\n\nexport interface UsePinInputProps {\n  /**\n   * If `true`, the pin input receives focus on mount\n   */\n  autoFocus?: boolean\n  /**\n   * The value of the the pin input. This is the value\n   * that will be returned when the pin input is filled\n   */\n  value?: string\n  /**\n   * The default value of the pin input\n   */\n  defaultValue?: string\n  /**\n   * Function called on input change\n   */\n  onChange?: (value: string) => void\n  /**\n   * Function called when all inputs have valid values\n   */\n  onComplete?: (value: string) => void\n  /**\n   * The placeholder for the pin input\n   */\n  placeholder?: string\n  /**\n   * If `true`, focus will move automatically to the next input once filled\n   * @default true\n   */\n  manageFocus?: boolean\n  /**\n   * The base id string that will be applied to the input fields.\n   * The index of the input will be appended to this base id.\n   *\n   * @example\n   * if id=\"foo\", the first input will have `foo-0`\n   */\n  id?: string\n  /**\n   * If `true`, the pin input component is put in the disabled state\n   */\n  isDisabled?: boolean\n  /**\n   * If `true`, the pin input component is put in the invalid state\n   */\n  isInvalid?: boolean\n}\n\nfunction toArray(value?: string) {\n  if (typeof value === \"string\") {\n    return value.split(\"\")\n  }\n  return undefined\n}\n\nexport function usePinInput(props: UsePinInputProps = {}) {\n  const {\n    autoFocus,\n    value,\n    defaultValue,\n    onChange,\n    onComplete,\n    placeholder = \"○\",\n    manageFocus = true,\n    id: idProp,\n    isDisabled,\n    isInvalid,\n  } = props\n\n  const uuid = useId()\n  const id = idProp ?? `pin-input-${uuid}`\n\n  const domContext = useDescendants<HTMLInputElement, {}>()\n  const { descendants } = domContext\n\n  const [moveFocus, setMoveFocus] = useState(true)\n\n  const [values, setValues] = useControllableState<string[]>({\n    defaultValue: toArray(defaultValue) || [],\n    value: toArray(value),\n    onChange: (values) => onChange?.(values.join(\"\")),\n  })\n\n  useEffect(() => {\n    if (autoFocus) {\n      const firstInput = descendants[0]\n      firstInput?.element?.focus()\n    }\n  }, [descendants, autoFocus])\n\n  const focusNext = useCallback(\n    (index: number) => {\n      if (!moveFocus || !manageFocus) return\n\n      const nextInput = descendants[index + 1]\n      nextInput?.element?.focus()\n    },\n    [descendants, moveFocus, manageFocus],\n  )\n\n  const setValue = useCallback(\n    (value: string, index: number) => {\n      const nextValues = [...values]\n      nextValues[index] = value\n      setValues(nextValues)\n\n      // if we're at the last input, call onComplete (no need to move focus)\n      if (index === descendants.length - 1) {\n        onComplete?.(nextValues.join(\"\"))\n      } else {\n        focusNext(index)\n      }\n    },\n    [values, setValues, focusNext, onComplete, descendants.length],\n  )\n\n  const clear = useCallback(() => {\n    const values: string[] = Array(descendants.length).fill(\"\")\n    setValues(values)\n    const firstInput = descendants[0]\n    firstInput.element?.focus()\n  }, [descendants, setValues])\n\n  return {\n    id,\n    domContext,\n    setValue,\n    values,\n    setValues,\n    setMoveFocus,\n    clear,\n    onComplete,\n    placeholder,\n    manageFocus,\n    isDisabled,\n    isInvalid,\n  }\n}\n\nexport type UsePinInputReturn = ReturnType<typeof usePinInput>\n\nexport interface UsePinInputFieldProps {\n  ref?: Ref<HTMLInputElement>\n  onChange?: ChangeEventHandler\n  onKeyDown?: KeyboardEventHandler\n  onFocus?: FocusEventHandler\n  onBlur?: FocusEventHandler\n}\n\nexport function usePinInputField(props: UsePinInputFieldProps = {}) {\n  const { ref: forwardedRef, ...rest } = props\n\n  const ref = useRef<HTMLInputElement>(null)\n\n  const {\n    id,\n    isDisabled,\n    isInvalid,\n    setValue,\n    values,\n    setMoveFocus,\n    setValues,\n    domContext,\n    placeholder,\n    manageFocus,\n  } = usePinInputContext()\n\n  const { descendants } = domContext\n\n  const index = useDescendant({\n    context: domContext,\n    element: ref.current,\n  })\n\n  const getNextValue = useCallback(\n    (currentValue: string, eventValue: string) => {\n      let nextValue = eventValue\n      if (currentValue && currentValue.length > 0) {\n        const [firstValue, secondValue] = eventValue\n        if (currentValue[0] === firstValue) {\n          nextValue = secondValue\n        } else if (currentValue[0] === secondValue) {\n          nextValue = firstValue\n        }\n      }\n      return nextValue\n    },\n    [],\n  )\n\n  // Improved from: https://github.com/uber/baseweb/blob/master/src/pin-code/pin-code.js\n  const onChange = useCallback(\n    (event: ChangeEvent<HTMLInputElement>) => {\n      const eventValue = event.target.value\n      const currentValue = values[index]\n      const nextValue = getNextValue(currentValue, eventValue)\n\n      // if the value was removed using backspace\n      if (nextValue === \"\") {\n        setValue(\"\", index)\n        return\n      }\n\n      // in the case of an autocomplete or copy and paste\n      if (eventValue.length > 2) {\n        // see if we can use the string to fill out our values\n        if (eventValue.match(/^[0-9]+$/)) {\n          const { length } = descendants\n          // ensure the value matches the number of inputs\n          const nextValue = eventValue.split(\"\").filter((_, i) => i < length)\n          setValues(nextValue)\n        }\n        return\n      }\n\n      // only set if the new value is a number\n      if (nextValue.match(/^[0-9]$/)) {\n        setValue(nextValue, index)\n      }\n\n      setMoveFocus(true)\n    },\n    [\n      values,\n      index,\n      getNextValue,\n      setMoveFocus,\n      setValue,\n      descendants.length,\n      setValues,\n    ],\n  )\n\n  const onKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      if (event.key === \"Backspace\" && manageFocus) {\n        if ((event.target as HTMLInputElement).value === \"\") {\n          const prevInput = descendants[index - 1]\n          if (prevInput) {\n            setValue(\"\", index - 1)\n            prevInput.element?.focus()\n            setMoveFocus(true)\n          }\n        } else {\n          setMoveFocus(false)\n        }\n      }\n    },\n    [descendants, index, setValue, setMoveFocus, manageFocus],\n  )\n\n  const [hasFocus, setHasFocus] = useState(false)\n\n  const onFocus = useCallback(() => {\n    setHasFocus(true)\n  }, [])\n\n  const onBlur = useCallback(() => {\n    setHasFocus(false)\n  }, [])\n\n  return {\n    ...rest,\n    id: `${id}-${index}`,\n    disabled: isDisabled,\n    \"aria-invalid\": ariaAttr(isInvalid),\n    ref: mergeRefs(ref, forwardedRef),\n    onChange: callAllHandlers(rest.onChange, onChange),\n    onKeyDown: callAllHandlers(rest.onKeyDown, onKeyDown),\n    onFocus: callAllHandlers(rest.onFocus, onFocus),\n    onBlur: callAllHandlers(rest.onBlur, onBlur),\n    value: values[index] || \"\",\n    inputMode: \"numeric\" as InputHTMLAttributes<any>[\"inputMode\"],\n    \"aria-label\": rest[\"aria-label\"] || \"Please enter your pin code\",\n    autoComplete: \"not-allowed\",\n    placeholder: hasFocus ? \"\" : placeholder,\n  }\n}\n"]},"metadata":{},"sourceType":"module"}