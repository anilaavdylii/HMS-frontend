{"ast":null,"code":"import { useEffect } from 'react';\nimport { useGetMeQuery } from '../rq/hooks/useGetMeQuery';\nimport { useAuthStore } from '../store/auth/authStore';\nimport { jwtVerify } from '../utils/jwt/jwtVerify';\nexport const useAuthInit = () => {\n  const {\n    setIsAuthenticated,\n    setIsLoading,\n    isAuthenticated,\n    user,\n    setUser\n  } = useAuthStore();\n  const {\n    isLoading\n  } = useGetMeQuery({\n    enabled: isAuthenticated && !user,\n    onSuccess: data => {\n      setUser(data);\n    }\n  });\n  useEffect(() => {\n    const isValid = jwtVerify(localStorage.getItem('auth.token') || '');\n    setIsAuthenticated(isValid); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    setIsLoading(isLoading);\n  }, [isLoading, setIsLoading]);\n};","map":{"version":3,"names":["useEffect","useGetMeQuery","useAuthStore","jwtVerify","useAuthInit","setIsAuthenticated","setIsLoading","isAuthenticated","user","setUser","isLoading","enabled","onSuccess","data","isValid","localStorage","getItem"],"sources":["C:/Users/hp/Desktop/frontenddd/HMS-frontend/src/hooks/useAuthInit.js"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { useGetMeQuery } from '../rq/hooks/useGetMeQuery';\r\nimport { useAuthStore } from '../store/auth/authStore';\r\nimport { jwtVerify } from '../utils/jwt/jwtVerify';\r\n\r\nexport const useAuthInit = () => {\r\n  const { setIsAuthenticated, setIsLoading, isAuthenticated, user, setUser } =\r\n    useAuthStore();\r\n\r\n  const { isLoading } = useGetMeQuery({\r\n    enabled: isAuthenticated && !user,\r\n    onSuccess: (data) => {\r\n      setUser(data);\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    const isValid = jwtVerify(localStorage.getItem('auth.token') || '');\r\n    setIsAuthenticated(isValid);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setIsLoading(isLoading);\r\n  }, [isLoading, setIsLoading]);\r\n};\r\n"],"mappings":"AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,aAAT,QAA8B,2BAA9B;AACA,SAASC,YAAT,QAA6B,yBAA7B;AACA,SAASC,SAAT,QAA0B,wBAA1B;AAEA,OAAO,MAAMC,WAAW,GAAG,MAAM;EAC/B,MAAM;IAAEC,kBAAF;IAAsBC,YAAtB;IAAoCC,eAApC;IAAqDC,IAArD;IAA2DC;EAA3D,IACJP,YAAY,EADd;EAGA,MAAM;IAAEQ;EAAF,IAAgBT,aAAa,CAAC;IAClCU,OAAO,EAAEJ,eAAe,IAAI,CAACC,IADK;IAElCI,SAAS,EAAGC,IAAD,IAAU;MACnBJ,OAAO,CAACI,IAAD,CAAP;IACD;EAJiC,CAAD,CAAnC;EAOAb,SAAS,CAAC,MAAM;IACd,MAAMc,OAAO,GAAGX,SAAS,CAACY,YAAY,CAACC,OAAb,CAAqB,YAArB,KAAsC,EAAvC,CAAzB;IACAX,kBAAkB,CAACS,OAAD,CAAlB,CAFc,CAGd;EACD,CAJQ,EAIN,EAJM,CAAT;EAMAd,SAAS,CAAC,MAAM;IACdM,YAAY,CAACI,SAAD,CAAZ;EACD,CAFQ,EAEN,CAACA,SAAD,EAAYJ,YAAZ,CAFM,CAAT;AAGD,CApBM"},"metadata":{},"sourceType":"module"}